<!DOCTYPE html>
<html>
  <head>
    <meta
      charset="UTF-8"
      name="viewport"
      content="width=device-width,initial-scale=1"
    />
    <link rel="stylesheet" href="/chatroom.css" />
    <script src="https://cdn.jsdelivr.net/npm/p5@1.0.0/lib/p5.min.js"></script>
    <script
      type="text/javascript"
      src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"
    ></script>
    <link rel="icon" href="./resources/favicon.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bulma/0.7.2/css/bulma.min.css"
    />
    <script
      defer
      src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.4.5/socket.io.min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"></script>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <script>
      const roomName = "<%= roomName%>";
    </script>
    <link rel="stylesheet" href="/sessionstyle.css" />

    <title>Your Room | Tutors4Zoomers</title>
  </head>

  <body>
    <br /><br />
    <div class="container">
      <div class="block">
        <div id="whiteboard-holder" class="column is-two-thirds"></div>
      </div>

      <div class="block">
        <div class="columns">
          <div class="column" style="text-align: left;">
            <article class="message is-primary">
              <div class="message-header">
                <p>Whiteboard Controls</p>
              </div>
              <div class="message-body">
                <button class="colours button is-primary" id="turquoise">
                  ⠀
                </button>
                <button class="colours button is-info" id="blue">⠀</button>

                <button class="colours button is-success" id="green">⠀</button>

                <button class="colours button is-danger" id="red">⠀</button>
                <button class="colours button is-warning" id="yellow">⠀</button>
                <button class="colours button is-black" id="black">⠀</button>
                <br /><br />
                <button class="button is-small" id="small">small</button>
                <button class="button is-medium" id="regular">Regular</button>
                <button class="button is-large" id="large">LARGE</button>
                <br /><br />
                <button class="button" id="eraser">Eraser</button>
                <br /><br />
                Shortcuts: <br />
                E — Clear Canvas <br />
                Z — Undo
                <br /><br />
                <form
                  method="post"
                  enctype="multipart/form-data"
                  action="/images"
                  id="upload"
                >
                  <input type="file" name="filename" id="fileUp" />
                  <input
                    type="text"
                    value="<%= roomName%>"
                    id="socketInfo"
                    name="socketName"
                  />
                  <input
                    type="submit"
                    name="upload"
                    id="submit"
                    class="button is-small"
                  />
                </form>
              </div>
            </article>
          </div>

          <div class="column">
            <div id="conversation"></div>
            <br />
            <div class="field has-addons">
              <p class="control">
                <input
                  id="msg"
                  class="input"
                  type="text"
                  placeholder="Type message"
                />
              </p>
              <p class="control">
                <input id="sendMsg" type="button" class="button" value="Send" />
              </p>
            </div>
            <div>
              <p>Users in room:</p>
              <div id="onlineUser"></div>
            </div>
          </div>

          <div class="column">
            <video id="localVideo" autoplay playsinline></video>
          </div>

          <div class="column">
            <video id="remoteVideo" autoplay playsinline></video>
          </div>
        </div>
      </div>

      <!-- Merge conflict here, don't know why though -->
      <!--the file upload form-->
    </div>

    <script src="/sketch.js"></script>
    <script src="/chat.js"></script>
  </body>
</html>
